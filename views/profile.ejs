<%- include('includes/header') %>

<div class="container py-md-5 container--narrow">
  <% success.forEach((message) => { %>
  <div class="alert alert-success text-center"><%= message %></div>
  <% }) %>
  <h2>
    <img
      class="avatar-small"
      src="https://gravatar.com/avatar/b9408a09298632b5151200f3449434ef?s=128"
    />
    <%= profileUsername %> <% if(user && !isVisitorsProfile){ if (isFollowing) {
    %>
    <form
      class="ml-2 d-inline"
      action="/removeFollow/<%= profileUsername %>"
      method="POST"
    >
      <button class="btn btn-danger btn-sm">
        Stop Following <i class="fas fa-user-times"></i>
      </button>
    </form>
    <% } else { %>
    <form
      class="ml-2 d-inline"
      action="/addFollow/<%= profileUsername %>"
      method="POST"
    >
      <button class="btn btn-primary btn-sm">
        Follow <i class="fas fa-user-plus"></i>
      </button>
    </form>
    <% } } %>
  </h2>

  <div class="profile-nav nav nav-tabs pt-2 mb-4">
    <a href="#" class="profile-nav-link nav-item nav-link active"
      >Posts: <%= posts.length %></a
    >
    <a href="#" class="profile-nav-link nav-item nav-link ">Followers: 3</a>
    <a href="#" class="profile-nav-link nav-item nav-link ">Following: 2</a>
  </div>

  <div class="list-group">
    <% posts.forEach(function(post) { %>
    <a
      href="/post/<%= post.id %>"
      class="list-group-item list-group-item-action"
    >
      <img
        class="avatar-tiny"
        src="https://gravatar.com/avatar/b9408a09298632b5151200f3449434ef?s=128"
      />
      <strong><%= post.title %></strong> on <%= post.createdDate.getDate()
      %>/<%= post.createdDate.getMonth() + 1 %>/<%=
      post.createdDate.getFullYear() %>
    </a>
    <% }) %>
  </div>
</div>

<%- include('includes/footer') %>
